{
    "app-id": "io.github.passosdomingues.praxis",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "24.08",
    "sdk": "org.freedesktop.Sdk",
    "command": "praxis",
    "separate-locales": false,
    "finish-args": [
        "--share=ipc",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--device=dri",
        "--share=network",
        "--filesystem=xdg-run/ollama:ro",
        "--filesystem=home"
    ],
    "modules": [
        {
            "name": "praxis",
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p /app/bin/lib",
                "mkdir -p /app/share/applications",
                "mkdir -p /app/share/icons/hicolor/512x512/apps",
                "mkdir -p /app/share/metainfo",
                "cp -r build_staging/ai_engine /app/bin/",
                "cp build_staging/praxis_executable /app/bin/praxis_executable",
                "cp build_staging/praxis /app/bin/praxis",
                "cp -r build_staging/lib /app/bin/",
                "ln -sf /usr/lib/x86_64-linux-gnu/libsqlite3.so.0 /app/bin/lib/libsqlite3.so",
                "cp -r build_staging/data /app/bin/",
                "cp flatpak/io.github.passosdomingues.praxis.desktop /app/share/applications/io.github.passosdomingues.praxis.desktop",
                "cp flatpak/io.github.passosdomingues.praxis.metainfo.xml /app/share/metainfo/io.github.passosdomingues.praxis.metainfo.xml",
                "cp flatpak/icon.png /app/share/icons/hicolor/512x512/apps/io.github.passosdomingues.praxis.png"
            ],
            "sources": [
                {
                    "type": "dir",
                    "path": "."
                }
            ]
        }
    ]
}